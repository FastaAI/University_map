<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>ì „êµ­ ëŒ€í•™ íƒìƒ‰ í™ˆí˜ì´ì§€</title>
  <style>
    :root{
      --bg0:#05070c;
      --bg1:#081021;
      --panel:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --green:#38f08c;
      --blue:#60a5fa;
      --amber:#fbbf24;
      --red:#fb7185;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui, AppleSDGothicNeo, Pretendard, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 15%, rgba(96,165,250,.14), transparent 60%),
        radial-gradient(900px 600px at 80% 70%, rgba(56,240,140,.10), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      overflow:hidden;
    }

    .wrap{
      min-height:100dvh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }

    .shell{
      width:min(1040px, 100%);
      display:grid;
      grid-template-columns: 1.05fr 0.95fr;
      gap:18px;
      align-items:stretch;
    }

    .card{
      background:var(--panel);
      border:1px solid var(--line);
      border-radius:22px;
      box-shadow:0 20px 80px rgba(0,0,0,.55);
      overflow:hidden;
      transform: translateZ(0);
    }

    .left{
      padding:20px;
      position:relative;
      isolation:isolate;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-weight:900;
      font-size:12px;
      padding:8px 10px;
      border:1px solid rgba(56,240,140,.25);
      background:rgba(56,240,140,.10);
      color:rgba(214,255,233,.95);
      border-radius:999px;
      user-select:none;
    }
    .badge .dot{
      width:8px;height:8px;border-radius:999px;
      background:var(--green);
      box-shadow:0 0 14px rgba(56,240,140,.55);
      animation: blink 1.2s infinite;
    }
    @keyframes blink{
      0%,100%{opacity:.35; transform:scale(.9)}
      50%{opacity:1; transform:scale(1.1)}
    }

    h1{
      margin:14px 0 10px;
      font-size:30px;
      letter-spacing:-.2px;
      line-height:1.15;
    }
    p{
      margin:0 0 14px;
      color:var(--muted);
      line-height:1.6;
      font-size:14px;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin:10px 0 16px;
    }
    .chip{
      font-size:12px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.05);
      color:rgba(255,255,255,.82);
      user-select:none;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:14px;
    }
    .btn{
      appearance:none;
      border:0;
      border-radius:16px;
      padding:12px 14px;
      font-weight:900;
      cursor:pointer;
      color:#07101a;
      background:linear-gradient(180deg, rgba(56,240,140,1), rgba(56,240,140,.85));
      box-shadow:0 14px 40px rgba(56,240,140,.18);
      display:inline-flex;
      align-items:center;
      gap:10px;
      text-decoration:none;
      user-select:none;
    }
    .btn:hover{filter:brightness(1.03)}
    .btn:active{transform:translateY(1px)}

    .btn.secondary{
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.90);
      border:1px solid rgba(255,255,255,.14);
      box-shadow:none;
    }

    .hint{
      margin-top:12px;
      font-size:12px;
      color:rgba(255,255,255,.62);
    }

    /* ---- Radar ---- */
    .right{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    .radar{
      width:min(440px, 100%);
      aspect-ratio:1/1;
      border-radius:999px;
      background:
        radial-gradient(circle at center, rgba(56,240,140,.09) 0 2px, transparent 2px),
        radial-gradient(circle at center, rgba(56,240,140,.08) 0 25%, transparent 25%),
        radial-gradient(circle at center, rgba(56,240,140,.06) 0 50%, transparent 50%),
        radial-gradient(circle at center, rgba(56,240,140,.05) 0 75%, transparent 75%),
        radial-gradient(circle at center, rgba(56,240,140,.03) 0 100%, transparent 100%),
        linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0));
      border:1px solid rgba(56,240,140,.22);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.06),
        0 20px 70px rgba(0,0,0,.55);
      position:relative;
      overflow:hidden;
      transition: filter .18s ease, box-shadow .18s ease;
    }

    /* ë²„ìŠ¤íŠ¸ ë•Œ ë ˆì´ë”ê°€ ì‚´ì§ ë°ì•„ì§€ëŠ” ì²´ê° */
    .radar.bursting{
      filter: brightness(1.16) saturate(1.1);
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.08),
        0 24px 90px rgba(56,240,140,.14),
        0 20px 70px rgba(0,0,0,.55);
    }

    .radar::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(90deg, transparent 49.6%, rgba(56,240,140,.18) 50%, transparent 50.4%),
        linear-gradient(0deg, transparent 49.6%, rgba(56,240,140,.18) 50%, transparent 50.4%);
      opacity:.75;
      pointer-events:none;
    }

    .beam{
      position:absolute;
      inset:-20%;
      background: conic-gradient(from 0deg, rgba(56,240,140,.0) 0 290deg, rgba(56,240,140,.0) 290deg, rgba(56,240,140,.55) 320deg, rgba(56,240,140,.0) 360deg);
      animation: sweep 2.4s linear infinite;
      filter: blur(.2px);
      pointer-events:none;
    }
    @keyframes sweep{
      from{transform:rotate(0deg)}
      to{transform:rotate(360deg)}
    }

    .center{
      position:absolute;
      left:50%; top:50%;
      width:10px; height:10px;
      transform:translate(-50%,-50%);
      border-radius:999px;
      background:var(--green);
      box-shadow:0 0 22px rgba(56,240,140,.65);
      z-index:3;
    }

    .blip{
      position:absolute;
      width:8px;height:8px;
      border-radius:999px;
      background:rgba(56,240,140,.9);
      box-shadow:0 0 18px rgba(56,240,140,.55);
      transform:translate(-50%,-50%);
      z-index:3;
      opacity:.85;
    }
    .blip::after{
      content:"";
      position:absolute;
      inset:-10px;
      border-radius:999px;
      border:1px solid rgba(56,240,140,.18);
      animation: ping 1.6s ease-out infinite;
    }
    @keyframes ping{
      0%{transform:scale(.2); opacity:.7}
      100%{transform:scale(1.2); opacity:0}
    }

    .blip.b1{left:22%; top:34%; animation: flicker 2.8s infinite}
    .blip.b2{left:66%; top:24%; animation: flicker 3.2s infinite}
    .blip.b3{left:72%; top:66%; animation: flicker 2.4s infinite}
    .blip.b4{left:34%; top:72%; animation: flicker 3.6s infinite}
    @keyframes flicker{
      0%,100%{opacity:.35}
      45%{opacity:.95}
      55%{opacity:.55}
      70%{opacity:.9}
    }

    .scantext{
      position:absolute;
      left:18px; right:18px; bottom:18px;
      background:rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:12px 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      color:rgba(214,255,233,.92);
      font-size:12px;
      line-height:1.55;
      z-index:4;
      height: 155px;
      overflow: auto;
      scrollbar-width: none;
    }
    .scantext::-webkit-scrollbar{display:none}

    .scantext .line{opacity:.92; white-space:nowrap}
    .scantext .muted{opacity:.72}
    .scantext .ok{color:rgba(56,240,140,.95)}
    .scantext .warn{color:rgba(251,191,36,.98)}
    .scantext .err{color:rgba(251,113,133,.98)}
    .scantext.flash{
      animation: flash .22s ease;
    }
    @keyframes flash{
      from{filter:brightness(1.45)}
      to{filter:brightness(1)}
    }

    /* âœ… "ì†Œë¦¬ ì—†ëŠ” ì§„ë™" (ë²„ìŠ¤íŠ¸ ìˆœê°„ì— ì¹´ë“œê°€ ë–¨ë¦¼) */
    .card.shake{
      animation: shake .55s linear;
    }
    @keyframes shake{
      0%{transform:translate3d(0,0,0)}
      10%{transform:translate3d(-1px,1px,0)}
      20%{transform:translate3d(2px,-1px,0)}
      30%{transform:translate3d(-2px,0,0)}
      40%{transform:translate3d(2px,1px,0)}
      50%{transform:translate3d(-1px,-1px,0)}
      60%{transform:translate3d(2px,0,0)}
      70%{transform:translate3d(-2px,1px,0)}
      80%{transform:translate3d(1px,-1px,0)}
      90%{transform:translate3d(-1px,0,0)}
      100%{transform:translate3d(0,0,0)}
    }

    @media (max-width: 900px){
      body{overflow:auto}
      .shell{grid-template-columns:1fr}
      .right{padding:16px}
      h1{font-size:26px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="shell">
      <section class="card left" id="leftCard">
        <div class="badge">
          <span class="dot"></span>
          Radar Mode: Online
        </div>

        <h1>ì£¼ë³€ ëŒ€í•™êµ ìŠ¤ìº” ì¤‘</h1>
        <p>
          ì§€ê¸ˆ ì„œ ìˆëŠ” ìœ„ì¹˜ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ, ë°˜ê²½ ë‚´ ëŒ€í•™êµë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.<br>
          í•™êµ ê²€ìƒ‰, 2D ì§€ë„, 3D(ë¸Œì´ì›”ë“œ)ë„ í•œ ë²ˆì— ì—°ê²°ë©ë‹ˆë‹¤.
        </p>

        <div class="chips">
          <div class="chip">ğŸ“ ë‚´ ìœ„ì¹˜ ì£¼ë³€ ëŒ€í•™</div>
          <div class="chip">ğŸ” í•™êµ ê²€ìƒ‰</div>
          <div class="chip">ğŸŒ 2D ë° 3D ì§€ë„</div>
          
        </div>

        <div class="actions">
          <a class="btn" href="/app" id="startBtn">
            <span>ğŸš€</span>
            <span>ì§€ê¸ˆ ë‹¹ì¥ ì‹œì‘í•˜ê¸°</span>
          </a>

        

        </div>

        <div class="hint">
          íŒ: ëª¨ë°”ì¼ì—ì„œëŠ” ìœ„ì¹˜ ê¶Œí•œì„ í—ˆìš©í•˜ë©´ â€œë‚´ ìœ„ì¹˜ë¡œ ìŠ¤ìº”â€ì´ ë°”ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
        </div>
      </section>

      <section class="card right" id="rightCard">
        <div class="radar" id="radar" aria-label="Radar scanner">
          <div class="beam"></div>
          <div class="center"></div>

          <div class="blip b1" title="signal"></div>
          <div class="blip b2" title="signal"></div>
          <div class="blip b3" title="signal"></div>
          <div class="blip b4" title="signal"></div>

          <div class="scantext" id="scanText">
            <div class="line muted">[BOOT] loading dataset...</div>
            <div class="line ok">[OK] í•™êµ ì¢Œí‘œ ë¡œë“œ ì™„ë£Œ</div>
            <div class="line muted">[WAIT] location permission pending</div>
          </div>
        </div>
      </section>
    </div>
  </div>

  <script>
    const scanText = document.getElementById("scanText");
    const radar = document.getElementById("radar");
    const locBtn = document.getElementById("locBtn");
    const demoBtn = document.getElementById("demoBtn");
    const leftCard = document.getElementById("leftCard");
    const rightCard = document.getElementById("rightCard");

    const basePool = [
      {cls:"muted", msg:"[BOOT] loading dataset..."},
      {cls:"ok",    msg:"[OK] í•™êµ ì¢Œí‘œ ë¡œë“œ ì™„ë£Œ"},
      {cls:"ok",    msg:"[OK] ì§€ë„ ì—”ì§„ ì¤€ë¹„ë¨"},
      {cls:"muted", msg:"[SCAN] sweeping sector..."},
      {cls:"muted", msg:"[INFO] ranking candidates..."},
      {cls:"muted", msg:"[INFO] matching aliases..."},
      {cls:"muted", msg:"[INFO] deduplication pass..."},
      {cls:"ok",    msg:"[OK] signal stabilized"},
      {cls:"warn",  msg:"[WAIT] location permission pending"},
      {cls:"muted", msg:"[HINT] press a button to scan"}
    ];

    const foundPool = [
      "ì„œìš¸ëŒ€í•™êµ","ì—°ì„¸ëŒ€í•™êµ","ê³ ë ¤ëŒ€í•™êµ","í•œì–‘ëŒ€í•™êµ","ì„±ê· ê´€ëŒ€í•™êµ",
      "ì¤‘ì•™ëŒ€í•™êµ","ê²½í¬ëŒ€í•™êµ","ì´í™”ì—¬ìëŒ€í•™êµ","ì„œê°•ëŒ€í•™êµ","í•œêµ­ì™¸êµ­ì–´ëŒ€í•™êµ",
      "ë¶€ì‚°ëŒ€í•™êµ","ê²½ë¶ëŒ€í•™êµ","ì „ë‚¨ëŒ€í•™êµ","ì¶©ë‚¨ëŒ€í•™êµ","ê°•ì›ëŒ€í•™êµ",
      "ì¸í•˜ëŒ€í•™êµ","ì•„ì£¼ëŒ€í•™êµ","ê±´êµ­ëŒ€í•™êµ","ë™êµ­ëŒ€í•™êµ","í™ìµëŒ€í•™êµ"
    ];

    let logs = [];
    let i = 0;
    let bursting = false;

    function tstamp(){
      return new Date().toTimeString().slice(0,8);
    }

    function escapeHtml(str){
      return str
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;");
    }

    function render(){
      scanText.innerHTML = logs.map(l =>
        `<div class="line ${l.cls}">${l.ts} ${escapeHtml(l.msg)}</div>`
      ).join("");
      scanText.scrollTop = scanText.scrollHeight;
    }

    function push(cls, msg){
      logs.push({ts:tstamp(), cls, msg});
    }

    function keepLast(n){
      if (logs.length > n) logs = logs.slice(-n);
    }

    // âœ… ì†Œë¦¬ ì—†ëŠ” "ì§„ë™" ì—°ì¶œ: ì¹´ë“œ í”ë“¤ê¸° (ëª¨ë°”ì¼ì—ì„  ì§„ë™ APIë„ ê°™ì´ ì‹œë„)
    function vibrateFx(kind){
      // í™”ë©´ í”ë“¤ë¦¼
      leftCard.classList.remove("shake");
      rightCard.classList.remove("shake");
      // reflow to restart animation
      void leftCard.offsetWidth;
      leftCard.classList.add("shake");
      rightCard.classList.add("shake");

      // ëª¨ë°”ì¼ ì§„ë™ (ì§€ì› ì•ˆ ë˜ë©´ ë¬´ì‹œë¨)
      if (navigator.vibrate) {
        if (kind === "burst") {
          navigator.vibrate([40, 30, 60, 30, 40]);
        } else if (kind === "clear") {
          navigator.vibrate([20, 20, 20]);
        } else {
          navigator.vibrate(30);
        }
      }
    }

    // í‰ì†Œ: 900msë§ˆë‹¤ 1ì¤„, 10ì¤„ ìœ ì§€
    setInterval(() => {
      if (bursting) return;
      const item = basePool[i % basePool.length];
      push(item.cls, item.msg);
      i++;
      keepLast(10);
      render();
    }, 900);

    // âœ… ì§„ì§œ "í­ì£¼" + âœ… í´ë¦¬ì–´ + âœ… 3~5ì´ˆ ì •ì  + âœ… ì§„ë™
    function burstSequence(reason){
      if (bursting) return;
      bursting = true;

      radar.classList.add("bursting");
      scanText.classList.add("flash");

      vibrateFx("burst");

      push("warn", `[BURST] high activity detected (${reason})`);
      render();

      const burstTotal = 60; // 1ì´ˆ ë‚´ì™¸ í­ì£¼ ì²´ê°
      let k = 0;

      const burstTimer = setInterval(() => {
        const r = Math.random();

        if (r < 0.48) {
          const uni = foundPool[Math.floor(Math.random() * foundPool.length)];
          push("ok", `[FOUND] ${uni}`);
        } else if (r < 0.78) {
          push("muted", "[SCAN] sweeping sector...");
        } else if (r < 0.93) {
          push("muted", "[INFO] ranking candidates...");
        } else {
          push("warn", "[WARN] jitter detected, recalibrating...");
        }

        keepLast(120);
        render();

        k++;
        if (k >= burstTotal){
          clearInterval(burstTimer);

          push("ok", "[OK] burst complete");
          render();

          // CLR ì¶œë ¥ í›„ ì‹¤ì œë¡œ í™”ë©´ ë¹„ìš°ê³  3~5ì´ˆ ì •ì  ëŒ€ê¸°
          setTimeout(() => {
            vibrateFx("clear");
            push("warn", "[CLR] buffer flushed");
            render();

            setTimeout(() => {
              // í™”ë©´ì„ ì§„ì§œë¡œ ë¹„ì›€
              logs = [];
              render();

              const pause = 3000 + Math.random() * 2000; // âœ… 3~5ì´ˆ

              setTimeout(() => {
                // ì¬ë¶€íŒ… ëŠë‚Œ
                push("muted", "[BOOT] resyncing...");
                push("muted", "[BOOT] reloading modules...");
                push("ok",    "[OK] engine online");
                push("muted", "[SCAN] idle");
                render();

                radar.classList.remove("bursting");
                scanText.classList.remove("flash");
                bursting = false;
              }, pause);

            }, 180);
          }, 250);
        }
      }, 16);
    }

    // ìë™ ë²„ìŠ¤íŠ¸: 10ì´ˆë§ˆë‹¤ í™•ë¥ ì ìœ¼ë¡œ
    setInterval(() => {
      if (Math.random() < 0.55) burstSequence("auto");
    }, 10000);

    // ë²„íŠ¼ íŠ¸ë¦¬ê±°
    locBtn.addEventListener("click", () => {
      burstSequence("user");

      if (!navigator.geolocation){
        push("err", "[ERR] geolocation not supported");
        keepLast(120);
        render();
        return;
      }

      navigator.geolocation.getCurrentPosition(
        (pos) => {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;
          push("ok", `[OK] gps locked (${lat.toFixed(5)}, ${lng.toFixed(5)})`);
          keepLast(120);
          render();
          window.location.href = `/app?lat=${encodeURIComponent(lat)}&lng=${encodeURIComponent(lng)}`;
        },
        (err) => {
          push("err", `[ERR] location denied (${err.code})`);
          keepLast(120);
          render();
        },
        {enableHighAccuracy:true, timeout:8000, maximumAge:10000}
      );
    });

    demoBtn.addEventListener("click", () => {
      burstSequence("demo");
    });
  </script>
</body>
</html>
